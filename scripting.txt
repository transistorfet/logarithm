
Logarithm Command Scripting
for Version 0.6+
09/10/2005


Logarithm implements commands as external perl scripts which it loads and executes when needed.  These scripts are placed in the cmd directory and must be name the command name followed by ".lm".   For example, the access command would be in a file called access.lm.  Each script must contain a sub routine called "do_<name>" where name is the name of the command (which must be the same as the file name of the script).  This sub routine is passed 3 parameters: $irc, $msg, and $privs.  The script may also contain other sub routines which are called/activated by the main sub routine.

The $irc paramater is the irc connection handle which is passed to irc functions.  The irc functions all have a name which starts with "irc_" and take $irc as their first argument.  The $msg parameter is built by irc_get_msg with a few fields added to make commands simpler.  The 'respond' field contains the channel that the command should respond to.  If a user sent a private message then this is the user's nick.  If this was sent to a channel then this is the channel name.  The 'params' field is an array reference of the text line that was sent broken up at the spaces.  The 'phrase' field is all of the text sent from after the command name up to the end of the line.  The $privs parameter is the privilage level of the user who initiated the command so that permissions can be easily checked.  It is the responsiblity of the command to make sure that the user has the required privilage level to execute the command.

